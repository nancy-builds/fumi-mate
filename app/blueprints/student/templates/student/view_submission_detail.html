{% extends "base.html" %}
{% block title %}View Submission{% endblock %}

{% block content %}
<section class="section-padding mt-5 container">
  <h2 class="mb-4">{{ submission.task.title if submission.task else "Submission Detail" }}</h2>

  <div class="card shadow-sm p-4 mb-4">
    <h5>Your Writing</h5>
    <p class="mt-2">{{ submission.content | replace('\n', '<br>') | safe }}</p>
  </div>

  <div class="card shadow-sm p-4">
    <h5>Feedback & Scores</h5>
    <p><strong>AI Score:</strong> {{ submission.ai_score or 'â€”' }}</p>
    <p><strong>Teacher Score:</strong> {{ submission.teacher_score or 'â€”' }}</p>
    <p><strong>AI Feedback:</strong><br> {{ submission.ai_feedback or 'â€”' }}</p>
    <p><strong>Teacher Feedback:</strong><br> {{ submission.teacher_feedback or 'â€”' }}</p>
  </div>

      <div class="card mb-4">
    <div class="card-header">ğŸ“£ Full Feedback</div>
    <div class="card-body">
      <p>{{ submission.ai_feedback | safe }}</p>
    </div>
  </div>

  <div class="card mb-4">
    <div class="card-header">âœ… Action Plan</div>
    <ul class="list-group list-group-flush">
      {% for step in action_plan %}
      <li class="list-group-item">{{ step }}</li>
      {% endfor %}
    </ul>
  </div>

  <div class="card mb-4">
    <div class="card-header">ğŸ§  Practice Exercises</div>
    <div class="card-body">
      {% for exercise in practice_exercises %}
      <div class="mb-3">
        <h6>{{ exercise.title }}</h6>
        <p>{{ exercise.description }}</p>
        <pre><code>{{ exercise.example }}</code></pre>
      </div>
      {% endfor %}
    </div>
  </div>

  <div class="card mb-4">
    <div class="card-header">ğŸ” Detailed Analysis</div>
    <div class="card-body">
      <h6>Grammar</h6>
      <pre>{{ detailed_analysis.grammar | tojson(indent=2) }}</pre>

      <h6>Vocabulary</h6>
      <pre>{{ detailed_analysis.vocabulary | tojson(indent=2) }}</pre>

      <h6>Structure</h6>
      <pre>{{ detailed_analysis.structure | tojson(indent=2) }}</pre>

      <h6>Fluency</h6>
      <pre>{{ detailed_analysis.fluency | tojson(indent=2) }}</pre>

      <h6>Content</h6>
      <pre>{{ detailed_analysis.content | tojson(indent=2) }}</pre>
    </div>
  </div>

</section>>
{% endblock %}
