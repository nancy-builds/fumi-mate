{% extends "base.html" %}
{% block title %}Writing Test - {{ task.title }}{% endblock %}

{% block content %}
<section class="section-padding mt-5 container">
  <div class="card shadow-sm p-4">
    <h2 class="mb-3">{{ task.title }}</h2>
    <p class="text-muted">{{ task.description }}</p>
    <hr>

    <div class="d-flex justify-content-between align-items-center mb-3">
      <div class="text-danger fw-semibold">
        <span id="timer">15:00</span> left
      </div>
      <small class="text-secondary">Due: {{ task.due_date.strftime("%d %b %Y %H:%M") if task.due_date else 'No deadline' }}</small>
    </div>


    <form action="{{ url_for('student.submit_test', task_id=task.id) }}" method="POST"
          onsubmit="return confirm('Are you sure you want to submit your test? Once submitted, you cannot edit it.');">
        <div class="mb-3">
            <label for="content" class="form-label fw-semibold">Your Writing</label>
            <textarea id="content" name="content" class="form-control" rows="10" required>{{ submission.content if submission else '' }}</textarea>
          </div>

          <div class="alert alert-warning small">
            ⚠️ Make sure to review before submitting — once submitted, editing may not be allowed.
          </div>

      <button type="submit" class="btn btn-primary mt-2">Submit</button>
    </form>
  </div>
</section>

{% endblock %}
